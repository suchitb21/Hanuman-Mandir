<nav [class.scrolled]="isScrolled">
  <div class="container">
    
    <a routerLink="/" class="logo-container">
      <img src="/logo.png" alt="Mandir Logo" class="logo">
    </a>

    <ul class="nav-links desktop-only">
      <li *ngFor="let link of navLinks" class="nav-item">
        
        <a [routerLink]="link.route" 
           routerLinkActive="active" 
           [routerLinkActiveOptions]="{exact: true}"
           class="nav-link">
          {{ link.label }}
          
          <span class="arrow" *ngIf="link.children">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="chevron-icon"
            >
              <path d="m6 9 6 6 6-6" />
            </svg>
          </span>          
        </a>

        <ul class="dropdown-menu" *ngIf="link.children">
          <li *ngFor="let child of link.children">
            <a [routerLink]="child.route" routerLinkActive="active-child">
              {{ child.label }}
            </a>
          </li>
        </ul>

      </li>
    </ul>

    <div class="cta-container desktop-only">
      <a routerLink="/contact" class="cta-btn">CONTACT US</a>
    </div>

    <button class="hamburger mobile-only" (click)="toggleMobileMenu()" aria-label="Toggle Navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
  </div>

  <div class="mobile-menu" *ngIf="isMobileMenuOpen">
    <ul>
      <li *ngFor="let link of navLinks">
        <div class="mobile-link-header">
          <a [routerLink]="link.route" (click)="closeMenu()">{{ link.label }}</a>
            
            <span
              *ngIf="link.children" 
              class="mobile-arrow"
              (click)="toggleMobileDropdown(link.label)"
              [class.open]="activeMobileDropdown === link.label"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="chevron-icon"
              >
                <path d="m6 9 6 6 6-6" />
              </svg>
            </span>

        </div>

        <ul class="mobile-submenu" *ngIf="link.children && activeMobileDropdown === link.label">
          <li *ngFor="let child of link.children">
            <a [routerLink]="child.route" (click)="closeMenu()">{{ child.label }}</a>
          </li>
        </ul>
      </li>
      <li>
        <a routerLink="/contact" class="mobile-cta" (click)="closeMenu()">CONTACT US</a>
      </li>
    </ul>
  </div>
</nav>